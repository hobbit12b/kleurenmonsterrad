<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Kleurenmonster Spinner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#f6f7fb; --fg:#222; --panel:#fff; }
    * { box-sizing: border-box; }
    body {
      display: grid;
      grid-template-columns: 480px 520px;
      gap: 24px;
      justify-content: center;
      align-items: start;
      padding: 20px;
      font-family: system-ui, Arial, sans-serif;
      background: var(--bg);
      color: var(--fg);
    }
    .kolom { display: flex; flex-direction: column; align-items: center; }
    h1 { font-size: 20px; margin: 10px 0; }
    canvas { background: var(--panel); border: 4px solid var(--fg); border-radius: 12px; }
    #rad { width: 440px; height: 400px; }
    button {
      margin-top: 12px; padding: 10px 20px; font-size: 16px;
      border: 0; border-radius: 12px; background: var(--fg); color: #fff; cursor: pointer;
    }
    button[disabled] { opacity: .6; cursor: not-allowed; }
    #resultaat { margin-top: 10px; font-size: 18px; font-weight: 700; min-height: 1.5em; }
    #live { position: absolute; left: -9999px; }
  </style>
</head>
<body>
  <div class="kolom">
    <h1>Spinner</h1>
    <canvas id="rad" width="440" height="400" aria-label="kleurenspin"></canvas>
    <button id="draaiBtn" aria-describedby="resultaat">Draai</button>
    <div id="resultaat"></div>
    <div id="live" role="status" aria-live="polite"></div>
  </div>

  <div class="kolom">
    <h1>Kleurenmonster</h1>
    <canvas id="monster" width="400" height="600" aria-label="kleurenmonster"></canvas>
  </div>

  <script>
    // Kleuren en labels
    const opties = [
      "Wit","Grijs","Zwart","Lichtblauw","Donkerblauw","Roze","Paars",
      "Rood","Lichtgroen","Donkergroen","Geel","Oranje"
    ];
    const kleurMap = {
      "Wit":"#ffffff","Grijs":"#bdbdbd","Zwart":"#000000","Lichtblauw":"#87cefa",
      "Donkerblauw":"#1e3a8a","Roze":"#ff9acb","Paars":"#8b5cf6","Rood":"#ef4444",
      "Lichtgroen":"#86efac","Donkergroen":"#166534","Geel":"#fde047","Oranje":"#fb923c"
    };

    // Donkere segmenten voor witte segmenttekst
    const donkereSegmenten = new Set(["Zwart","Donkerblauw","Donkergroen"]);
    // Alleen bij Zwart worden lijnen wit
    const lijnenWitKleuren = new Set(["Zwart"]);
    // Pupillen bij deze drie
    const pupilKleuren = new Set(["Zwart","Donkerblauw","Donkergroen"]);

    // Spinner
    const rad = document.getElementById("rad");
    const rctx = rad.getContext("2d");
    const CX = 200, CY = 200, R = 190;  // wielpositie met ruimte rechts voor de pijl
    let hoek = 0, bezig = false, gekozen = "Wit";

    function tekenSchijven() {
      const stap = 2 * Math.PI / opties.length;
      for (let i = 0; i < opties.length; i++) {
        const naam = opties[i];
        rctx.beginPath();
        rctx.moveTo(CX, CY);
        rctx.arc(CX, CY, R, i * stap, (i + 1) * stap);
        rctx.closePath();
        rctx.fillStyle = kleurMap[naam] || "#000";
        rctx.fill();
        rctx.strokeStyle = "#222";
        rctx.lineWidth = 2;
        rctx.stroke();

        let tekstkleur = "#000";
        if (donkereSegmenten.has(naam)) tekstkleur = "#fff";
        rctx.save();
        rctx.translate(CX, CY);
        rctx.rotate(i * stap + stap / 2);
        rctx.textAlign = "right";
        rctx.fillStyle = tekstkleur;
        rctx.font = "16px system-ui, Arial";
        rctx.fillText(naam, R - 12, 6);
        rctx.restore();
      }
      rctx.lineWidth = 6;
      rctx.strokeStyle = "#333";
      rctx.beginPath();
      rctx.arc(CX, CY, R + 3, 0, Math.PI * 2);
      rctx.stroke();
    }

    // Pijl buiten het rad, rechts, wijst naar links
    function tekenPijl() {
      const offset = 22;
      const tipX = CX + R + offset;
      const tipY = CY;
      const baseX = tipX + 30;
      const halfH = 20;

      rctx.beginPath();
      rctx.moveTo(tipX, tipY);
      rctx.lineTo(baseX, tipY - halfH);
      rctx.lineTo(baseX, tipY + halfH);
      rctx.closePath();
      rctx.fillStyle = "#222";
      rctx.fill();

      rctx.beginPath();
      rctx.arc(CX, CY, 6, 0, Math.PI * 2);
      rctx.fill();
    }

    function renderRad() {
      rctx.clearRect(0, 0, rad.width, rad.height);
      rctx.save();
      rctx.translate(CX, CY);
      rctx.rotate(hoek * Math.PI / 180);
      rctx.translate(-CX, -CY);
      tekenSchijven();
      rctx.restore();
      tekenPijl();
    }

    function indexOnderPijl() {
      const n = opties.length, stap = 360 / n;
      let a = (-hoek) % 360; if (a < 0) a += 360;
      return Math.floor(a / stap) % n;
    }

    function draai() {
      if (bezig) return;
      bezig = true;
      document.getElementById("draaiBtn").disabled = true;
      let snelheid = 20 + Math.random() * 15;
      hoek += 360 * 4;
      function anim() {
        snelheid *= 0.985;
        hoek += snelheid;
        renderRad();
        if (snelheid > 0.25) requestAnimationFrame(anim);
        else {
          hoek = hoek % 360;
          renderRad();
          const idx = indexOnderPijl();
          gekozen = opties[idx];

          cons
